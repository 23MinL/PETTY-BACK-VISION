<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>프로필 수정</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.5.0/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.5.0/js/bootstrap.bundle.min.js"></script>
</head>
<body>
<div class="container mt-5">
    <h2>프로필 수정</h2>
    <form id="editProfileForm" th:action="@{/profile/update}" th:object="${userProfile}" method="post">
        <div class="form-group">
            <label for="displayName">사용자 이름</label>
            <input type="text" class="form-control" id="displayName" name="displayName" th:field="*{displayName}" required>
        </div>
        <div class="form-group">
            <label for="phone">전화번호</label>
            <input type="text" class="form-control" id="phone" name="phone" th:field="*{phone}" required>
            <div class="invalid-feedback" id="phoneError"></div>
        </div>

        <button type="submit" class="btn btn-primary">수정하기</button>
    </form>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('editProfileForm');
        const phoneInput = document.getElementById('phone');
        const phoneErrorElement = document.getElementById('phoneError');

        form.addEventListener('submit', function(e) {
            const phone = phoneInput.value;
            const phoneRegex = /^01[016789]\d{7,8}$/;
            phoneErrorElement.textContent = '';
            phoneInput.classList.remove('is-invalid'); // 초기화

            if (!phoneRegex.test(phone)) {
                e.preventDefault(); // 폼 제출 막기
                phoneErrorElement.textContent = '유효한 전화번호를 입력해주세요. (예: 01012345678)';
                phoneInput.classList.add('is-invalid');
            }
        });
    });
</script>
</body>
</html>